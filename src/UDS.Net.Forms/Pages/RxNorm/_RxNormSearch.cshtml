@model RxNormLookupModel
@{
}
<turbo-frame id="_RxNorm">
    <form method="post" action="~/UDS4/A4/@Model.VisitId?handler=RxNormSearch" data-turbo-frame="_RxNorm">
        <div data-controller="autocomplete  rxNormDisplayNames" data-action="autocomplete:newSearch->rxNormDisplayNames#fetchData focusout->autocomplete#handleOutsideClick" data-rxNormDisplayNames-fetchedLetters-value="" data-rxNormDisplayNames-url-value="../A4/@Model.VisitId?handler=RxNormStream">
            <label class="max-w-xl text-3xl font-semibold tracking-tight text-balance text-gray-900 sm:text-4xl lg:col-span-7">Search RxNorm</label>
            <div class="w-full max-w-md lg:col-span-5 lg:pt-2">
                <div class="flex gap-x-4">
                    <label asp-for="SearchTerm" class="sr-only">@Html.DisplayNameFor(m => m.SearchTerm)</label>
                    <input asp-for="SearchTerm" type="search" data-a4-target="search" data-autocomplete-target="searchBox" data-action="focus->autocomplete#showList input->autocomplete#filterList keydown.up->autocomplete#highlightItem keydown.down->autocomplete#highlightItem keydown.enter->autocomplete#setSearchBox" placeholder="Search by drug or brand name" autocomplete="off" class="block w-full max-w-lg rounded-md border-gray-400 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:max-w-xs sm:text-sm placeholder:text-gray-400 disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 disabled:shadow-none" />

                    <input type="hidden" asp-for="VisitId" />
                    @for (int i = 0; i < Model.CachedDrugCodes.Count(); i++)
                    {
                        <input asp-for="CachedDrugCodes[i].Id" type="hidden" />
                        <input asp-for="CachedDrugCodes[i].RxNormId" type="hidden" />
                        <input asp-for="CachedDrugCodes[i].DrugName" type="hidden" />
                        <input asp-for="CachedDrugCodes[i].BrandName" type="hidden" />
                        <input asp-for="CachedDrugCodes[i].IsOverTheCounter" type="hidden" />
                        <input asp-for="CachedDrugCodes[i].IsPopular" type="hidden" />
                        <input asp-for="CachedDrugCodes[i].IsSelected" type="hidden" value="true" />
                    }
                    <input data-a4-target="search" name="RxNormSearch" type="submit" value="Search" class="flex-none rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600" />
                </div>
                <!--// Autocomplete //-->
                <div data-autocomplete-target="list" class="hidden absolute z-10 mx-auto w-96 transform rounded-xl bg-white p-2 ring-1 shadow-2xl ring-black/5 transition-all">
                    <ul data-rxNormDisplayNames-target="list" class="-mb-2 max-h-72 scroll-py-2 overflow-y-auto py-2 text-sm text-gray-800" id="options" role="listbox">
                        <li data-autocomplete-target="item" class="cursor-default text-gray-900 rounded-md px-4 py-2 select-none" id="option-1" role="option" tabindex="-1">Search for medications by drug or brand name</li>
                    </ul>
                    <span data-rxNormDisplayNames-target="progressIndicator" class="hidden">
                        <svg class="mr-3 -ml-1 size-5 animate-spin text-indigo" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    </span>
                </div>
                <!--// No results //-->
                <div data-autocomplete-target="noResults" class="bg-slate-50 px-16 py-20 text-center hidden">
                    <h2 class="font-semibold text-slate-900">No results found</h2>
                    <p class="mt-2 text-sm/6 text-slate-600">We can’t find anything with that term at the moment, try searching something else.</p>
                </div>
            </div>
        </div>
    </form>
</turbo-frame>